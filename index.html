<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>RiskXLabs X-Wallet</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="css/styles.css" />
  <!-- Ethers for create/import/unlock (UI prototype) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/5.7.2/ethers.umd.min.js"></script>
</head>
<body>
  <div class="xwallet-shell">
    <!-- Sidebar -->
    <aside class="xwallet-sidebar">
      <div class="rx-logo">
        <div class="rx-logo-shield">
          <span class="rx-flask">⚗</span>
        </div>
        <div class="rx-logo-text">
          <span class="rx-brand">Risk<span class="rx-x">X</span>Labs</span>
          <span class="rx-sub">X-Wallet</span>
        </div>
      </div>

      <nav class="sidebar-nav">
        <button class="nav-item nav-item-active" data-view="dashboard">
          <span>Dashboard</span>
        </button>

        <!-- NEW: Wallets nav -->
        <button class="nav-item" id="walletsNavBtn" data-view="wallets">
          <span>Wallets</span>
        </button>

        <button class="nav-item" data-view="safesend">
          <span>SafeSend</span>
        </button>
        <button class="nav-item" data-view="activity">
          <span>Activity</span>
        </button>
        <button class="nav-item" data-view="settings">
          <span>Settings</span>
        </button>
      </nav>

      <div class="sidebar-wallet-actions">
        <button id="createWalletBtn" class="pill-btn-outline sidebar-cta">
          Create wallet
        </button>
        <button id="importWalletBtn" class="pill-btn-outline sidebar-cta">
          Import with 12-word seed
        </button>
      </div>

      <div class="sidebar-footer">
        <span class="version-pill" id="xwalletVersion">v1.5.9</span>
        <span class="status-pill" id="networkStatusPill">RPC: DISCONNECTED</span>
      </div>
    </aside>

    <!-- Main -->
    <main class="xwallet-main">
      <!-- Gate screen: shown when no wallet is unlocked -->
      <section id="walletGate" class="wallet-gate">
        <div class="wallet-gate-card">
          <h1 class="wallet-gate-title">Welcome to RiskXLabs X-Wallet</h1>
          <p class="wallet-gate-subtitle">
            Start by creating a new wallet or importing one with your 12-word seed phrase.
            When wallets on this device are locked, you can unlock with your password
            or seed phrase.
          </p>

          <div id="gateWalletList" class="wallet-gate-list" hidden></div>

          <div class="wallet-gate-actions">
            <button id="gateCreateBtn" class="primary-btn">
              Create wallet
            </button>
            <button id="gateImportBtn" class="pill-btn-outline">
              Import / Unlock with 12-word seed
            </button>
          </div>
        </div>
      </section>

      <!-- Top bar: network + current wallet (shown when unlocked) -->
      <header class="xwallet-topbar" id="walletTopbar" hidden>
        <div class="network-select-wrap">
          <label for="networkSelect">Network</label>
          <select id="networkSelect">
            <option value="ethereum-mainnet">Ethereum Mainnet</option>
            <option value="sepolia">Sepolia Testnet</option>
            <option value="polygon-pos">Polygon PoS</option>
            <option value="arbitrum">Arbitrum</option>
            <option value="polygon-zkevm">Polygon zkEVM</option>
            <option value="linea">Linea</option>
            <option value="base">Base</option>
            <option value="solana">Solana</option>
            <option value="tron">Tron</option>
          </select>
        </div>

        <div class="address-wrap">
          <div class="address-label">Current wallet</div>
          <div class="address-row">
            <span id="walletAddress" class="address-value">No wallet selected</span>
            <button id="copyAddressBtn" class="icon-btn" title="Copy address">
              ⧉
            </button>
            <button id="switchAccountBtn" class="pill-btn pill-btn-outline">
              Switch
            </button>
          </div>
        </div>
      </header>

      <!-- Hero banner (shown when unlocked) -->
      <section class="xwallet-hero" id="walletHero" hidden>
        <div class="xwallet-hero-text">
          <h2 class="xwallet-hero-title">
            Xwallet powered by Risk<span class="rx-x">X</span>Labs
          </h2>
          <p class="xwallet-hero-subtitle">
            Our <span class="safesend-tv">SafeSend</span> technology helps
            protect everyone from crypto novices to the savviest of traders
            from fraudsters. Get instant assessment and feedback before
            pulling the trigger.
          </p>
        </div>
      </section>

      <!-- Dashboard content (shown when unlocked) -->
      <section class="xwallet-content" id="walletDashboard" hidden>
        <!-- Left: holdings by wallet -->
        <section class="panel panel-balance">
          <div class="panel-header">
            <div>
              <h3>Total balance</h3>
              <p id="fiatBalanceLabel" class="panel-subtitle">$0.00</p>
            </div>
            <div class="balance-actions">
              <button id="receiveBtn" class="primary-btn ghost-btn">Receive</button>
              <button id="sendBtn" class="primary-btn">Send</button>
            </div>
          </div>

          <div class="panel-body">
            <div class="wallets-header-row">
              <h4 class="wallets-title">Holdings by wallet</h4>
              <span class="wallets-hint">
                Click <span class="wallets-plus">+</span> to view holdings.
              </span>
            </div>

            <div id="walletsContainer" class="wallets-list"></div>
          </div>

          <div class="panel-footer">
            <span class="hint-text">
              Expand a wallet to see each asset’s logo, quantity, USD value, and 24h change.
              Positive changes appear in green, negative in red.
            </span>
          </div>
        </section>

        <!-- Right: SafeSend / risk (UI only for now) -->
        <section class="panel panel-risk">
          <div class="panel-header">
            <h3>SafeSend Risk</h3>
            <span id="safesendScoreBadge" class="risk-badge risk-badge-neutral">
              Score: -- / 100
            </span>
          </div>

          <div class="panel-body">
            <div class="risk-summary">
              <div class="risk-gauge" id="riskGaugeDial">
                <span id="riskGaugeLabel">--</span>
              </div>
              <ul class="risk-highlights" id="riskHighlightsList"></ul>
            </div>

            <div class="risk-actions">
              <label for="recipientInput">Recipient address</label>
              <div class="recipient-row">
                <input
                  id="recipientInput"
                  type="text"
                  class="input"
                  placeholder="Paste address / ENS / Tron tag"
                />
                <button id="runSafeSendBtn" class="primary-btn">
                  Run SafeSend
                </button>
              </div>

              <button id="viewFullReportBtn" class="pill-btn pill-btn-outline">
                View full SafeSend report
              </button>
            </div>
          </div>

          <div class="panel-footer activity-footer">
            <div class="activity-header">
              <h4>Recent activity</h4>
              <button id="viewAllActivityBtn" class="link-btn">View all</button>
            </div>
            <div class="activity-list" id="activityList"></div>
          </div>
        </section>
      </section>
    </main>
  </div>

  <!-- Create wallet modal -->
  <div id="createWalletModal" class="modal" hidden>
    <div class="modal-backdrop" data-close-modal></div>
    <div class="modal-dialog">
      <header class="modal-header">
        <h2>Create new wallet</h2>
        <button class="icon-btn modal-close" data-close-modal>✕</button>
      </header>
      <div class="modal-body">
        <p class="modal-text">
          This 12-word phrase is the only way to recover this wallet.
          Store it somewhere safe. We never store it for you.
        </p>

        <div class="modal-field">
          <label>Wallet label</label>
          <input id="cwLabel" class="input" placeholder="e.g. Primary wallet" />
        </div>

        <!-- NEW: password field -->
        <div class="modal-field">
          <label>Create password (min 8 chars, letters &amp; numbers)</label>
          <input id="cwPassword" class="input" type="password" />
          <div id="cwPasswordError" class="modal-error" hidden></div>
        </div>

        <div class="modal-field">
          <label>12-word seed phrase</label>
          <textarea id="cwMnemonic" class="input input-multiline" readonly></textarea>
        </div>

        <div class="modal-field">
          <label>Address</label>
          <div id="cwAddress" class="address-value address-value-solid"></div>
        </div>
      </div>
      <footer class="modal-footer">
        <button class="ghost-btn" data-close-modal>Cancel</button>
        <button id="cwConfirmBtn" class="primary-btn">I’ve saved the seed</button>
      </footer>
    </div>
  </div>

  <!-- Import / unlock wallet modal -->
  <div id="importWalletModal" class="modal" hidden>
    <div class="modal-backdrop" data-close-modal></div>
    <div class="modal-dialog">
      <header class="modal-header">
        <h2>Import / unlock wallet</h2>
        <button class="icon-btn modal-close" data-close-modal>✕</button>
      </header>
      <div class="modal-body">
        <p class="modal-text">
          Paste your 12-word seed phrase below. If it matches a wallet already
          stored on this device, we’ll unlock it. Otherwise we’ll import it as a
          new wallet.
        </p>
        <div class="modal-field">
          <label>Wallet label (for new wallets)</label>
          <input id="iwLabel" class="input" placeholder="e.g. Ledger wallet" />
        </div>
        <div class="modal-field">
          <label>12-word seed phrase</label>
          <textarea
            id="iwMnemonic"
            class="input input-multiline"
            placeholder="twelve words separated by spaces"
          ></textarea>
          <div id="iwError" class="modal-error" hidden></div>
        </div>
      </div>
      <footer class="modal-footer">
        <button class="ghost-btn" data-close-modal>Cancel</button>
        <button id="iwImportBtn" class="primary-btn">Import / Unlock</button>
      </footer>
    </div>
  </div>

  <script src="js/app.js"></script>
</body>
</html>